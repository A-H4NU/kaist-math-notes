\documentclass[../introduction_to_set_theory.tex]{subfiles}
\begin{document}

\section{Ordered Pairs}

\dfn[orderedPair]{Ordered Pair}{
    \((a, b) \triangleq \{\{a\}, \{a, b\}\}\)
}

\thm[orderedPair]{}{
    \((a, b) = (a', b') \iff a = a' \land b = b'\)
}
\pf{Proof}{
    (\(\Leftarrow\)) is direct.

    (\(\Rightarrow\))
    If \(a = b\), we have \(\{\{a\}\} = \{\{a'\}, \{a', b'\}\}\),
    and thus \(\{a\} = \{a'\} = \{a', b'\}\),
    leaving the only option \(a = a' = b'\).

    If \(a \neq b\), we must have \(a' \neq b'\) by the argument above.
    Hence, we have \(\{\{a\}, \{a, b\}\} = \{\{a'\}, \{a', b'\}\}\),
    which implies \(\{a\} = \{a'\}\) and \(\{a, b\} = \{a', b'\}\).
}

\dfn[]{Ordered Triples and Quadruples}{
    \begin{itemize}[nolistsep, leftmargin=*]
        \ii \((a, b, c) = ((a, b), c)\)
        \ii \((a, b, c, d) = ((a, b, c), d)\)
    \end{itemize}
}

\subsection*{Selected Problems}

\exer[2.1.1]{}{
    If \(a, b \in A\), then \((a, b) \in \mcal P(\mcal P(A))\).
}
\pf{Proof}{
    If \(a, b \in A\), then \(\{a\}, \{a, b\} \in \mcal P(A)\),
    and thus \((a, b) = \{\{a\}, \{a, b\}\} \subseteq \mcal P(A)\).
}

\section{Relations}

\dfn[relation]{Binary Relation}{
    A set \(R\) is a \textit{binary relation}
    if all elements of \(R\) are ordered pairs.

    \[
        R \text{ is a binary relation} \iff
        (a \in R \implies \exs x,\: \exs y,\: a = (x, y))
    \]
}

\notat{}{
    If \((x, y) \in R\), we write \(xRy\) and say \textit{\(x\) is in relation \(R\) with \(y\)}.
}

\dfn{Domain, Range, and Field of Binary Relation}{
    Let \(R\) be a binary relation.
    \begin{itemize}[nolistsep, leftmargin=*]
        \ii \(\dom R \triangleq \{\,x \mid \exs y\: xRy\,\}\) is called the \textit{domain} of \(R\).
        \ii \(\ran R \triangleq \{\,y \mid \exs x\: xRy\,\}\) is called the \textit{range} of \(R\).
        \ii \(\field R \triangleq \dom R \cup \ran R\) is called the \textit{field} of \(R\).
        \ii If \(\field R \subseteq X\), we say that \(R\) is a \textit{relation in \(X\)}
            or that \(R\) is a relation \textit{between} elements of \(X\).
    \end{itemize}
}

\mlemma[]{}{
    Let \(R\) be a binary relation.
    Then, \(\dom R\) and \(\ran R\) exist.
}
\pf{Proof}{
    By \Cref{exer:2.2.1}, if \(xRy\), then \(x, y \in A \triangleq \bigcup \left(\bigcup R\right)\).
    Hence, \(\dom R\) and \(\ran R\) exist.
}

\dfn[]{Image and Inverse Image}{
    Let \(R\) be a binary relation and \(A\) be a set.
    \begin{itemize}[nolistsep, leftmargin=*]
        \ii \(R[A] \triangleq \{\,y \in \ran R \mid \exs x \in A,\: xRy\,\}\)
            is called the \textit{image} of \(A\) under \(R\).
        \ii \(R\inv[A] \triangleq \{\,x \in \dom R \mid \exs y \in A,\: xRy\,\}\)
            is called the \textit{inverse image} of \(A\) under \(R\).
    \end{itemize}
}

\notat{}{
    We write \(\{\,(x, y) \mid \mbf{P}(x, y)\,\}\) instead of
    \(\{\,w \mid \exs x,\: \exs y,\: w = (x, y) \land \mbf{P}(x, y)\,\}\).
}

\dfn[]{Inverse Relation}{
    Let \(R\) be a binary relation.
    The \textit{inverse} of \(R\) is the set
    \[
        R\inv \triangleq \{\,(x, y) \mid yRx\,\}.
    \]
}

\dfn[]{Composition}{
    Let \(R\) and \(S\) be binary relations.
    The relation
    \[
        S \circ R \triangleq \{\,(x, z) \mid \exs y,\: xRy \land ySz\}
    \]
    is called the \textit{composition} of \(R\) and \(S\).
}

\dfn[]{Membership Relation and Identity Relation}{
    Let \(A\) be a set.
    \begin{itemize}[nolistsep, leftmargin=*]
        \ii The \textit{membership relation on \(A\)} is defined by
            \[
                \in_A\: \triangleq \{\,(a, b) \mid a, b \in A \land a \in b\,\}.
            \]
        \ii The \textit{identity relation on} \(A\) is defined by
            \[
                \mrm{Id}_A \triangleq \{\,(a, a) \mid a \in A\,\}.
            \]
    \end{itemize}
}

\dfn[cartesianProduct]{Cartesian Product}{
    Let \(A\) and \(B\) be sets.
    The set
    \(
        A \times B \triangleq \{\,(a, b) \mid a \in A \land b \in B\,\}
    \)
    is called the \textit{Cartesian product} product of \(A\) and \(B\).
}

\mlemma[cartesianProductExists]{}{
    Let \(A\) and \(B\) be sets.
    \(A \times B\) exists.
}
\pf{Proof}{
    If \(a \in A\) and \(b \in B\), by \Cref{exer:2.1.1}, we have \((a, b) \in \mcal{P}(\mcal{P}(A \cup B))\).
}

\cor[]{}{
    Let \(R\) and \(S\) be binary relations and \(A\) be a set.
    Then, \(R\inv\), \(S \circ R\), \(\in_A\), and \(\mrm{Id}_A\) exist.
}
\mclm{Proof}{\hfill
    \begin{itemize}[nolistsep]
        \ii If \(yRx\), then \((x, y) \in (\ran R) \times (\dom R)\).
        \ii If \((x, z) \in S \circ R\), then \((x, z) \in (\dom R) \times (\ran S)\).
        \ii If \(a, b \in A\), then \((a, b) \in A \times A\).
        \ii If \(a \in A\), then \((a, a) \in A \times A\).\qed
    \end{itemize}
}

\mlemma[invImgRisImgRInv]{}{
    Let \(R\) be a binary relation.
    The inverse image of \(A\) under \(R\) is equal to the image of \(A\) under \(R\inv\).
}
\pf{Proof}{
    Note that \(\dom R = \{\,x \mid \exs y\: xRy\,\} = \{\,x \mid \exs y \: yR\inv x\,\} = \ran R\inv\).
    Therefore,
    \begin{align*}
        & x \in (\text{the inverse image of }A\text{ under }R) \\
        \iff& x \in \dom R \land \exs y \in A,\: xRy \\
        \iff& x \in \ran R\inv \land \exs y \in A,\: yR\inv x \\
        \iff& x \in (\text{the image of }A\text{ under }R\inv).
    \end{align*}
}

\nt{
    \noindent
    \Cref{lem:invImgRisImgRInv} resolves the possible ambiguity on the expression \(R\inv[A]\).
}

\notat{}{
    We write \(A^2\) instead of \(A \times A\).
}

\subsection*{Selected Problems}

\exer[2.2.1]{}{
    Let \(R\) be a binary relation. Let \(A = \bigcup \big(\bigcup R\big)\).
    Prove that \((x, y) \in R\) implies \(x \in A\) and \(y \in A\).
}
\pf{Proof}{
    If \((x, y) = \{\{x\}, \{x, y\}\} \in R\),
    Then \(\{x, y\} \in \bigcup R\), and thus \(x, y \in A\).
}

\setexernumber{2}

\exer[2.2.3]{}{
    Let \(R\) be a binary relation and \(A\) and \(B\) be sets. Prove:
    \begin{enumerate}[nolistsep, label=(\roman*)]
        \ii \(R[A \cup B] = R[A] \cup R[B]\).
        \ii \(R[A \cap B] \subseteq R[A] \cap R[B]\).
        \ii \(R[A \setminus B] \supseteq R[A] \setminus R[B]\).
        \ii Show by an example that \(\subseteq\) and \(\supseteq\) in parts (ii) and (iii) cannot be
            replaced by \(=\).
        \ii \(R\inv[R[A]] \supseteq A \cap \dom R\) and \(R[R\inv[B]] \supseteq B \cap \ran R\).
            Give examples where equality does not hold.
    \end{enumerate}
}
\mclm{Proof}{
    \hfill
    \begin{enumerate}[nolistsep, label=(\roman*)]
        \ii
        \(\begin{aligned}[t]
            y \in R[A \cup B] &\iff \exs x,\: x \in A \cup B \land xRy \\
                              &\iff \exs x,\: (x \in A \land xRy) \lor (x \in B \land xRy) \\
                              &\iff y \in R[A] \lor y \in R[B] \iff y \in R[A] \cup R[B]
        \end{aligned}\)

        \ii
        Take any \(y \in R[A \cap B]\).
        Then, there exists \(x \in A \cap B\) such that \(xRy\).
        Hence, \(y \in R[A]\) and \(y \in R[B]\).

        \ii
        Take any \(y \in R[A] \setminus R[B]\).
        Then, there exists \(x \in A\) such that \(xRy\).
        If \(x \in B\), it implies that \(y \in R[B]\), which is a contradiction.
        Hence, \(x \in A \setminus B\).
        Therefore, \(y \in R[A \setminus B]\).

        \ii
        Let \(a\), \(b\), and \(c\) be mutually different sets.
        Let \(R = \{(a, a), (b, a), (c, c)\}\).
        Let \(A = \{a, c\}\) and \(B = \{b, c\}\).
        Then, \(R[A \cap B] = \{c\} \subsetneq R[A] \cap R[B] = \{a, c\}\),
        and \(R[A] \setminus R[B] = \OO \subsetneq R[A \setminus B] = \{a\}\).

        \ii
        Take any \(a \in A \cap \dom R\).
        Then, there exists \(b\) such that \(aRb\).
        Moreover, \(b \in R[A]\).
        Since \(b R\inv a\), we conclude that \(a \in R\inv[R[A]]\).

        Take any \(b \in B \cap \ran R\).
        Then, there exists \(a\) such that \(aRb\).
        Moreover, \(a \in R\inv[B]\).
        Hence, \(b \in R[R\inv[B]]\).
    \end{enumerate}
}

\exer[2.2.4]{}{
    Let \(R \subseteq X \times Y\). Prove:
    \begin{enumerate}[nolistsep, label=(\roman*)]
        \ii \(R[X] = \ran R\) and \(R\inv[Y] = \dom R\).
        \ii \(\dom R = \ran R\inv\) and \(\ran R = \dom R\inv\).
        \ii \((R\inv)\inv = R\).
        \ii \(R\inv \circ R \supseteq \mrm{Id}_{\dom R}\) and \(R \circ R\inv \supseteq \mrm{Id}_{\ran R}\)
    \end{enumerate}
}
\mclm{Proof}{\hfill
\begin{enumerate}[nolistsep, label=(\roman*)]
    \ii
    We already have \(R[X] \subseteq \ran R\) by definition.
    Take any \(y \in \ran R\).
    There exists \(x\) such that \((x, y) \in R\).
    Since \(R \subseteq X \times Y\), \(x \in X\).
    Therefore, \(y \in R[X]\); \(\ran R \subseteq R[X]\).
    A similar argument goes for \(R\inv[Y]\).

    \ii
    See the proof of \Cref{lem:invImgRisImgRInv}.

    \ii
    For any relation \(R\) and for all \(x\) and \(y\), we have \(xRy \iff yR\inv x\).
    Since \(R\inv\) is also a relation, we have
    \(xRy \iff yR\inv x \iff x (R\inv)\inv y\).

    \ii
    Take any \(x \in \dom R\).
    Then, there exists \(y\) such that \(xRy\).
    Then, \(y R\inv x\), and thus \(x(R \inv \circ R)x\).
    A similar argument goes for \(R \circ R\inv\). \qed

\end{enumerate}
}

\setexernumber{7}
\exer[2.2.8]{}{
    \(A \times B = \OO\) if and only if \(A = \OO\) or \(B = \OO\).
}
\pf{Proof}{
    (\(\Rightarrow\))
    If \(A \neq \OO\) and \(B \neq \OO\),
    we have \((a, b) \in A \times B\) where \(a \in A\) and \(b \in B\),
    and thus \(A \times B \neq \OO\).

    (\(\Leftarrow\))
    If \(A \times B \neq \OO\),
    then \(a \in A\) and \(b \in B\) where \((a, b) \in A \times B\).
}

\end{document}
